<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Crash Game Analysis</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>
<body class="bg-dark">
    <div class="container-fluid my-4 w-75">
        <div id="loading-indicator" class="hidden">Processing...</div>

        <header class="text-center mb-4">
            <h1>Crash Game Analysis</h1>
        </header>

        <div class="row mb-4">
            <div class="col-md-6 offset-md-3">
                <div class="input-group">
                    <span class="input-group-text">Multiplier Threshold</span>
                    <input type="number" id="multiplier-input" class="form-control" value="2.1" step="0.1">
                    <button id="update-button" class="btn btn-primary">Update</button>
                </div>
            </div>
        </div>

        <ul class="nav nav-tabs" id="myTab" role="tablist">
            <li class="nav-item" role="presentation">
                <button class="nav-link active" id="raw-data-tab" data-bs-toggle="tab" data-bs-target="#raw-data" type="button" role="tab">Raw Data</button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="analysis-tab" data-bs-toggle="tab" data-bs-target="#analysis" type="button" role="tab">Analysis & Graphs</button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="predictive-analysis-tab" data-bs-toggle="tab" data-bs-target="#predictive-analysis" type="button" role="tab">Predictive Analysis</button>
            </li>
        </ul>

        <div class="tab-content" id="myTabContent">
            <div class="tab-pane fade show active" id="raw-data" role="tabpanel">
                <div class="py-4">
                    <div id="summary-stats" class="row g-3 mb-4"></div>
                    <div id="raw-data-table" class="table-responsive"></div>
                </div>
            </div>
            <div class="tab-pane fade" id="analysis" role="tabpanel">
                <div class="row py-4">
                    <div class="col-lg-12 chart-container">
                        <h3 class="text-center">Crashes Over Time</h3>
                        <canvas id="line-chart"></canvas>
                    </div>
                    <div class="col-lg-8 chart-container">
                        <h3 id="streak-chart-title" class="text-center">Streak Analysis</h3>
                        <canvas id="streak-chart"></canvas>
                    </div>
                    <div class="col-lg-4 chart-container">
                        <h3 id="pie-chart-title" class="text-center">Multiplier Distribution</h3>
                        <canvas id="pie-chart"></canvas>
                    </div>
                </div>
            </div>
            <div class="tab-pane fade" id="predictive-analysis" role="tabpanel">
                <div class="row py-4">
                    <div class="col-lg-12 chart-container">
                        <h3 class="text-center">Multiplier Histogram</h3>
                        <canvas id="histogram-chart"></canvas>
                    </div>
                    <div class="col-lg-12 chart-container">
                        <div class="d-flex justify-content-center align-items-center mb-2">
                            <h3 id="rounds-since-chart-title" class="text-center me-3">Rounds Since Last High Multiplier</h3>
                            <div class="input-group" style="width: 200px;">
                                <span class="input-group-text">&gt;</span>
                                <input type="number" id="high-multiplier-input" class="form-control" value="10">
                                <button id="high-multiplier-update-button" class="btn btn-sm btn-outline-secondary">Update</button>
                                <span class="input-group-text">x</span>
                            </div>
                        </div>
                        <canvas id="rounds-since-chart"></canvas>
                    </div>
                    <div class="col-md-6 chart-container">
                        <h3 class="text-center">Streak Frequency</h3>
                        <div id="streak-frequency-table" class="table-responsive"></div>
                    </div>
                    <div class="col-md-6 chart-container">
                        <h3 class="text-center">Empirical Probabilities</h3>
                        <div id="probability-table" class="table-responsive"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-zoom"></script>
    <script src="data.js"></script>
    <script src="app.js"></script>
</body>
</html>